<style>
        /* æ–°å¢é–‹é—œæ¨£å¼ */
        .status-toggle { margin-bottom: 20px; padding: 20px; background: #222; border-radius: 15px; }
        .toggle-btn { padding: 10px 30px; border-radius: 30px; border: none; font-size: 16px; font-weight: bold; cursor: pointer; width: 100%; }
        .offline { background-color: #555; color: #aaa; }
        .online { background-color: #06c755; color: white; box-shadow: 0 0 15px rgba(6, 199, 85, 0.5); }
    </style>

<div class="status-toggle">
        <h3>ğŸŸ¢ æ¥å–®ç‹€æ…‹</h3>
        <p id="status-text">ç›®å‰ç‹€æ…‹ï¼šé›¢ç·š (å®¶é•·çœ‹ä¸åˆ°ä½ )</p>
        <button id="btn-toggle" class="toggle-btn offline" onclick="toggleStatus()">ğŸ”´ é»æ­¤ä¸Šç·šæ¥å–®</button>
    </div>

    <script>
        const LIFF_ID = "2008808827-DzeTt84n"; 
        const SCRIPT_URL = "YOUR_SCRIPT_URL_HERE"; // âš ï¸ è«‹æ›æˆæ‚¨çš„ç¶²å€

        let userProfile = null;
        let isOnline = false;

        async function main() {
            await liff.init({ liffId: LIFF_ID });
            if (!liff.isLoggedIn()) { liff.login(); return; }
            userProfile = await liff.getProfile();
            // é€™è£¡å¯ä»¥åŠ è¼‰ç›®å‰çš„ç‹€æ…‹ï¼Œç‚ºæ±‚ç°¡åŒ–å…ˆé è¨­ç‚º Offline
        }

        function toggleStatus() {
            isOnline = !isOnline;
            const btn = document.getElementById("btn-toggle");
            const txt = document.getElementById("status-text");

            if (isOnline) {
                btn.className = "toggle-btn online";
                btn.innerText = "ğŸŸ¢ æ­£åœ¨ç·šä¸Š (é»æ­¤ä¸‹ç·š)";
                txt.innerText = "ç›®å‰ç‹€æ…‹ï¼šç·šä¸Š (å®¶é•·å¯ä»¥é ç´„)";
                updateServer("Online");
            } else {
                btn.className = "toggle-btn offline";
                btn.innerText = "ğŸ”´ é»æ­¤ä¸Šç·šæ¥å–®";
                txt.innerText = "ç›®å‰ç‹€æ…‹ï¼šé›¢ç·š (å®¶é•·çœ‹ä¸åˆ°ä½ )";
                updateServer("Offline");
            }
        }

        function updateServer(status) {
            fetch(SCRIPT_URL, {
                method: "POST",
                body: JSON.stringify({
                    action: "toggleStatus",
                    userId: userProfile.userId,
                    status: status
                })
            });
        }
        
        // ... (ä¿ç•™åŸæœ¬çš„ GPS å’Œ æƒç¢¼å‡½å¼ handleGPS, handleScan, ä½†è¨˜å¾— fetch çš„ action è¦æ”¹æˆ checkin/scan é…åˆå¾Œç«¯)
        main();
    </script>
