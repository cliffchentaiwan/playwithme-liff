<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¥µç°¡æ¸¬è©¦</title>
</head>
<body style="padding: 20px; font-family: sans-serif; background-color: #ffe6e6;">

    <h1>ğŸš‘ æ¥µç°¡æ€¥æ•‘æ¨¡å¼ (ç²‰ç´…ç‰ˆ)</h1>
    <p>çœ‹åˆ°é€™å€‹ç²‰ç´…è‰²èƒŒæ™¯ï¼Œä»£è¡¨ GitHub æ›´æ–°æˆåŠŸäº†ï¼</p>
    <hr>
    
    <h3>ç‹€æ…‹ï¼š</h3>
    <div id="status" style="font-weight: bold; color: blue;">æº–å‚™é–‹å§‹...</div>
    
    <h3>éŒ¯èª¤åµæ¸¬ï¼š</h3>
    <div id="debug" style="color: red; margin-top: 10px; border: 1px solid red; padding: 10px; background: white; min-height: 50px;"></div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    
    <script>
        // éŒ¯èª¤ç›£è½
        window.onerror = function(msg, url, line) {
            document.getElementById('debug').innerHTML += "âŒ éŒ¯èª¤: " + msg + "<br>è¡Œæ•¸: " + line + "<br>";
        };

        const LIFF_ID = "2008808827-DzeTt84n";

        async function start() {
            try {
                document.getElementById('status').innerText = "1. åˆå§‹åŒ– LIFF...";
                await liff.init({ liffId: LIFF_ID });
                
                document.getElementById('status').innerText = "2. LIFF åˆå§‹åŒ–æˆåŠŸï¼";
                
                if (!liff.isLoggedIn()) {
                    document.getElementById('status').innerText = "3. æœªç™»å…¥ï¼Œè«‹ç™»å…¥";
                    liff.login();
                } else {
                    const profile = await liff.getProfile();
                    document.getElementById('status').innerHTML = "âœ… æˆåŠŸï¼ä½ å¥½ï¼Œ" + profile.displayName;
                    document.body.innerHTML += `<br><img src="${profile.pictureUrl}" style="width:100px; border-radius:50%; border: 3px solid green;">`;
                }
            } catch (err) {
                document.getElementById('debug').innerText = "åŸ·è¡Œå¤±æ•—: " + err;
            }
        }

        // åŸ·è¡Œ
        if (typeof liff === 'undefined') {
             document.getElementById('debug').innerText = "LIFF SDK æ²’è¼‰å…¥ï¼Œè«‹æª¢æŸ¥ç¶²è·¯";
        } else {
             start();
        }
    </script>
</body>
</html>
