<style>
        /* ... ä¿ç•™åŸæœ‰æ¨£å¼ ... */
        
        /* åº•éƒ¨å°è¦½åˆ— */
        .tab-bar { position: fixed; bottom: 0; left: 0; width: 100%; background: white; border-top: 1px solid #eee; display: flex; padding-bottom: 20px; }
        .tab-item { flex: 1; text-align: center; padding: 10px; color: #999; cursor: pointer; font-size: 12px; }
        .tab-item.active-tab { color: #06c755; font-weight: bold; }
        .tab-icon { font-size: 20px; display: block; margin-bottom: 2px; }

        /* è¨‚å–®å¡ç‰‡æ¨£å¼ (åƒè€ƒ PDF) */
        .order-card { background: white; border-radius: 10px; padding: 15px; margin-bottom: 15px; box-shadow: 0 2px 5px rgba(0,0,0,0.05); border-left: 5px solid #ccc; }
        .order-card.pending { border-left-color: #ff9800; } /* å¾…ç¢ºèªç‚ºæ©˜è‰² */
        .order-card.accepted { border-left-color: #06c755; } /* å·²æ¥å–®ç‚ºç¶ è‰² */
        .order-header { display: flex; justify-content: space-between; font-size: 14px; color: #666; margin-bottom: 10px; }
        .child-info { font-size: 16px; font-weight: bold; margin-bottom: 5px; }
        .note-text { background: #f9f9f9; padding: 8px; font-size: 13px; color: #555; border-radius: 5px; margin: 10px 0; }
        .btn-group { display: flex; gap: 10px; }
        .btn-accept { flex: 1; background: #06c755; color: white; border: none; padding: 8px; border-radius: 5px; font-weight: bold; }
        .btn-reject { flex: 1; background: #ff5252; color: white; border: none; padding: 8px; border-radius: 5px; font-weight: bold; }
    </style>

<div id="loading" class="page active">...</div>

    <div id="tab-profile" class="page">
        </div>

    <div id="tab-orders" class="page" style="padding-bottom: 80px;">
        <h2 style="margin-left: 5px;">è¨‚å–®ç®¡ç†</h2>
        <div id="order-list">
            <p style="text-align:center; color:#999; margin-top:50px;">æ­£åœ¨è¼‰å…¥è¨‚å–®...</p>
        </div>
    </div>

    <div class="tab-bar">
        <div class="tab-item active-tab" onclick="switchTab('profile')">
            <span class="tab-icon">ğŸ‘¤</span> å€‹äººæª”æ¡ˆ
        </div>
        <div class="tab-item" onclick="switchTab('orders')">
            <span class="tab-icon">ğŸ“„</span> è¨‚å–®ç®¡ç†
        </div>
    </div>

    <script>
        // ... ä¿ç•™ SCRIPT_URL ç­‰è®Šæ•¸ ...
        
        // åˆ‡æ›åˆ†é åŠŸèƒ½
        function switchTab(tabName) {
            document.querySelectorAll('.page').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(el => el.classList.remove('active-tab'));
            
            if (tabName === 'profile') {
                document.getElementById('tab-profile').classList.add('active');
                document.querySelectorAll('.tab-item')[0].classList.add('active-tab');
            } else {
                document.getElementById('tab-orders').classList.add('active');
                document.querySelectorAll('.tab-item')[1].classList.add('active-tab');
                loadOrders(); // åˆ‡æ›åˆ°è¨‚å–®é æ™‚æ‰è®€å–
            }
        }

        // è®€å–è¨‚å–®é‚è¼¯ (åƒè€ƒ PDF è¨­è¨ˆ)
        async function loadOrders() {
            const container = document.getElementById("order-list");
            container.innerHTML = '<p style="text-align:center; color:#999;">é‡æ–°æ•´ç†ä¸­...</p>';
            
            try {
                const res = await fetch(SCRIPT_URL, {
                    method: "POST",
                    body: JSON.stringify({ action: "getMyOrders", workerName: userProfile.displayName })
                });
                const result = await res.json();
                
                container.innerHTML = "";
                if (result.orders.length === 0) {
                    container.innerHTML = '<p style="text-align:center; color:#999; margin-top:50px;">ç›®å‰æ²’æœ‰è¨‚å–®</p>';
                    return;
                }

                result.orders.forEach(order => {
                    // æ ¹æ“šç‹€æ…‹é¡¯ç¤ºä¸åŒæ¨£å¼
                    let statusBadge = `<span style="color:orange">å¾…ç¢ºèª</span>`;
                    let buttons = `
                        <button class="btn-reject" onclick="updateOrder(${order.row}, 'å·²æ‹’çµ•')">æ‹’çµ•</button>
                        <button class="btn-accept" onclick="updateOrder(${order.row}, 'å·²æ¥å–®')">æ¥å–®</button>
                    `;

                    if (order.status === 'å·²æ¥å–®') {
                        statusBadge = `<span style="color:green">âœ… å·²æ¥å–®</span>`;
                        buttons = `<button style="width:100%; background:#eee; border:none; padding:8px; border-radius:5px;" disabled>ç­‰å¾…æœå‹™é–‹å§‹</button>`;
                    } else if (order.status === 'å·²æ‹’çµ•') {
                        statusBadge = `<span style="color:red">âŒ å·²æ‹’çµ•</span>`;
                        buttons = ``;
                    }

                    // è½‰æ›æ™‚é–“æ ¼å¼ (åªå–æ—¥æœŸå’Œæ™‚é–“)
                    const timeStr = new Date(order.time).toLocaleString('zh-TW', {month:'numeric', day:'numeric', hour:'2-digit', minute:'2-digit'});

                    const card = document.createElement("div");
                    card.className = `order-card ${order.status === 'å¾…ç¢ºèª' ? 'pending' : 'accepted'}`;
                    card.innerHTML = `
                        <div class="order-header">
                            <span>ğŸ“… ${timeStr}</span>
                            ${statusBadge}
                        </div>
                        <div class="child-info">ğŸ‘¶ ${order.child}</div>
                        <div style="font-size:14px; margin-bottom:5px;">å®¶é•·ï¼š${order.parent}</div>
                        <div class="note-text">å‚™è¨»ï¼š${order.note || "ç„¡"}</div>
                        <div style="text-align:right; font-weight:bold; color:#06c755; margin-bottom:10px;">$${order.price}</div>
                        <div class="btn-group">
                            ${buttons}
                        </div>
                    `;
                    container.appendChild(card);
                });

            } catch (err) {
                container.innerHTML = "è¼‰å…¥å¤±æ•—";
            }
        }

        // æ›´æ–°è¨‚å–®ç‹€æ…‹ (æ¥å–®/æ‹’å–®)
        async function updateOrder(row, newStatus) {
            if (!confirm(`ç¢ºå®šè¦è®Šæ›´ç‚ºã€Œ${newStatus}ã€å—ï¼Ÿ`)) return;
            
            try {
                await fetch(SCRIPT_URL, {
                    method: "POST",
                    body: JSON.stringify({ action: "updateOrderStatus", row: row, newStatus: newStatus })
                });
                alert("æ›´æ–°æˆåŠŸï¼");
                loadOrders(); // é‡æ–°æ•´ç†åˆ—è¡¨
            } catch (err) {
                alert("éŒ¯èª¤ï¼š" + err);
            }
        }

        // ... åŸæœ¬çš„ main, checkLogin, saveProfile ç­‰ä¿æŒä¸è®Š ...
    </script>
