<div class="card" id="checklist-section">
            <h3>ğŸ›¡ï¸ ä¿¡ä»»é©—è­‰æ¸…å–®</h3>
            
            <div class="checklist-item">
                <span class="check-icon done">âœ”</span>
                <span>æ‰‹æ©Ÿè™Ÿç¢¼ç¶å®š (LINE)</span>
            </div>

            <div class="checklist-item">
                <span class="check-icon" id="icon-front">â—</span>
                <div style="flex:1">
                    <span>èº«åˆ†è­‰ (æ­£é¢)</span>
                    <button class="btn-upload" onclick="triggerUpload('front')">ä¸Šå‚³</button>
                    <a id="link-front" href="#" target="_blank" style="display:none; font-size:12px;">(å·²ä¸Šå‚³, é»æ“ŠæŸ¥çœ‹)</a>
                </div>
            </div>

            <div class="checklist-item">
                <span class="check-icon" id="icon-back">â—</span>
                <div style="flex:1">
                    <span>èº«åˆ†è­‰ (åé¢)</span>
                    <button class="btn-upload" onclick="triggerUpload('back')">ä¸Šå‚³</button>
                    <a id="link-back" href="#" target="_blank" style="display:none; font-size:12px;">(å·²ä¸Šå‚³)</a>
                </div>
            </div>

            <div class="checklist-item">
                <span class="check-icon" id="icon-police">â—</span>
                <div style="flex:1">
                    <span>è‰¯æ°‘è­‰</span>
                    <button class="btn-upload" onclick="triggerUpload('police')">ä¸Šå‚³</button>
                    <a id="link-police" href="#" target="_blank" style="display:none; font-size:12px;">(å·²ä¸Šå‚³)</a>
                </div>
            </div>
        </div>

        <input type="file" id="file-input" style="display:none" accept="image/*" onchange="handleFileSelect()">

<style>
        /* æ–°å¢ä¸Šå‚³æŒ‰éˆ•æ¨£å¼ */
        .btn-upload { background: #eee; border: none; padding: 5px 10px; border-radius: 5px; margin-left: 10px; cursor: pointer; font-size: 12px; }
        .btn-upload:active { background: #ddd; }
    </style>

    <script>
        // ... åŸæœ¬çš„ main, checkLogin ...
        
        // åœ¨ checkLogin è£¡é¢ï¼Œè¦è®€å–è­‰ä»¶ç‹€æ…‹ä¸¦æ›´æ–° UI
        // è«‹å°‡é€™æ®µé‚è¼¯åŠ åˆ° checkLogin çš„ if(result.isRegistered) è£¡é¢
        /*
            if (d.docFront) updateDocUI('front', d.docFront);
            if (d.docBack) updateDocUI('back', d.docBack);
            if (d.docPolice) updateDocUI('police', d.docPolice);
        */

        // --- æ–°å¢ï¼šè™•ç†ä¸Šå‚³é‚è¼¯ ---
        let currentUploadType = "";

        function triggerUpload(type) {
            currentUploadType = type;
            document.getElementById("file-input").click(); // è§¸ç™¼éš±è—çš„æª”æ¡ˆé¸æ“‡å™¨
        }

        function handleFileSelect() {
            const file = document.getElementById("file-input").files[0];
            if (!file) return;

            // é¡¯ç¤ºè®€å–ä¸­
            const btn = document.querySelector(`button[onclick="triggerUpload('${currentUploadType}')"]`);
            const originalText = btn.innerText;
            btn.innerText = "ä¸Šå‚³ä¸­...";
            btn.disabled = true;

            // è½‰æˆ Base64
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = async function() {
                const base64Data = reader.result.split(',')[1]; // å»æ‰é–‹é ­çš„ data:image/jpeg;base64,
                
                const payload = {
                    action: "uploadDoc",
                    userId: userProfile.userId,
                    docType: currentUploadType,
                    fileName: userProfile.displayName + "_" + currentUploadType + ".jpg",
                    mimeType: file.type,
                    fileData: base64Data
                };

                try {
                    const res = await fetch(SCRIPT_URL, { method: "POST", body: JSON.stringify(payload) });
                    const result = await res.json();
                    
                    if (result.success) {
                        alert("âœ… ä¸Šå‚³æˆåŠŸï¼");
                        updateDocUI(currentUploadType, result.url);
                    } else {
                        alert("ä¸Šå‚³å¤±æ•—");
                    }
                } catch (err) {
                    alert("éŒ¯èª¤ï¼š" + err);
                } finally {
                    btn.innerText = "é‡æ–°ä¸Šå‚³";
                    btn.disabled = false;
                }
            };
        }

        function updateDocUI(type, url) {
            document.getElementById("icon-" + type).className = "check-icon done";
            document.getElementById("icon-" + type).innerText = "âœ”";
            
            const link = document.getElementById("link-" + type);
            link.href = url;
            link.style.display = "inline";
        }

        // ... åŸæœ¬çš„ saveProfile ...
    </script>
