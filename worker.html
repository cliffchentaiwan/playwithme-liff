<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¥µç°¡æ¸¬è©¦</title>
</head>
<body style="padding: 20px; font-family: sans-serif;">

    <h1>ğŸš‘ æ¥µç°¡æ€¥æ•‘æ¨¡å¼</h1>
    <p>å¦‚æœçœ‹åˆ°é€™å€‹ç•«é¢ï¼Œä»£è¡¨ç¶²é æœ¬èº«æ²’å£ã€‚</p>
    <hr>
    
    <div id="status">æ­£åœ¨æª¢æŸ¥ LIFF...</div>
    <div id="debug" style="color: red; margin-top: 10px;"></div>

    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script>
        // é¡¯ç¤ºéŒ¯èª¤åœ¨ç•«é¢ä¸Šï¼Œä¸èº²åœ¨ Console
        window.onerror = function(msg, url, line) {
            document.getElementById('debug').innerHTML += "âŒ éŒ¯èª¤: " + msg + " (è¡Œæ•¸: " + line + ")<br>";
        };

        const LIFF_ID = "2008808827-DzeTt84n";

        async function start() {
            try {
                document.getElementById('status').innerText = "1. åˆå§‹åŒ– LIFF...";
                await liff.init({ liffId: LIFF_ID });
                
                document.getElementById('status').innerText = "2. LIFF åˆå§‹åŒ–æˆåŠŸï¼";
                
                if (!liff.isLoggedIn()) {
                    document.getElementById('status').innerText = "3. æœªç™»å…¥ï¼Œè«‹ç™»å…¥ LINE";
                    liff.login();
                } else {
                    const profile = await liff.getProfile();
                    document.getElementById('status').innerHTML = "âœ… æˆåŠŸï¼<br>ä½ å¥½ï¼Œ" + profile.displayName;
                    
                    // é¡¯ç¤ºå¤§é ­è²¼ç¢ºèªçœŸçš„æŠ“åˆ°äº†
                    document.body.innerHTML += `<br><img src="${profile.pictureUrl}" style="width:100px; border-radius:50%;">`;
                }
            } catch (err) {
                document.getElementById('debug').innerText = "åŸ·è¡Œå¤±æ•—: " + err;
            }
        }

        // ç¢ºä¿ script è¼‰å…¥å¾Œæ‰åŸ·è¡Œ
        if (typeof liff === 'undefined') {
             document.getElementById('debug').innerText = "LIFF SDK è¼‰å…¥å¤±æ•—ï¼Œè«‹æª¢æŸ¥ç¶²è·¯";
        } else {
             start();
        }
    </script>
</body>
</html>
